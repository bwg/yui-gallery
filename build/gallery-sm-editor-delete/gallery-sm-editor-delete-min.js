YUI.add("gallery-sm-editor-delete",function(e,t){(function(){var t=e.Base.create("editorDelete",e.Base,[],{deleteCommands:{"delete":{commandFn:"_delete"},forwardDelete:{commandFn:"_forwardDelete"}},deleteKeyCommands:{backspace:"delete","delete":"forwardDelete"},initializer:function(){this.commands=e.merge(this.commands,this.deleteCommands),this.keyCommands&&(this.keyCommands=e.merge(this.keyCommands,this.deleteKeyCommands))},_delete:function(e){var t=this.selection,n=t.range(),r=n.startNode().ancestor(this.blockTags,!0),i=n.endNode().ancestor(this.blockTags,!0);if(n.isCollapsed()){n.expand({stopAt:r});var s=n.clone().selectNodeContents(r),o="forward"===e?"end":"start",u=n.compare(s,{myPoint:o,otherPoint:o});0===u&&("forward"===e?i=r.next():(i=r,r=i.previous())),n.collapse()}r&&i&&r!==i?(n.deleteContents(),n.endNode(r.get("lastChild"),"after"),n.collapse(),i.get("text").length&&r.append(i.get("childNodes")),i.remove(!0)):("forward"===e?this._execCommand("forwardDelete"):this._execCommand("delete"),this._inputNode===n.parentNode()&&(r=this._inputNode.get("childNodes").item(n.startOffset()-1),r&&(n.selectNodeContents(r),n.collapse()))),t.select(n)},_forwardDelete:function(){return this._delete("forward")}});e.namespace("Editor").Delete=t})()},"@VERSION@",{requires:["gallery-sm-editor-base","gallery-sm-editor-block","gallery-sm-editor-keys","node"]});
